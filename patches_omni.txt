
project build/
diff --git a/core/tasks/kernel.mk b/core/tasks/kernel.mk
index de74618..7f55136 100644
--- a/core/tasks/kernel.mk
+++ b/core/tasks/kernel.mk
@@ -196,7 +196,7 @@ define clean-module-folder
 endef
 
 ifeq ($(HOST_OS),darwin)
-  MAKE_FLAGS += C_INCLUDE_PATH=$(ANDROID_BUILD_TOP)/external/elfutils/0.153/libelf/
+  MAKE_FLAGS += C_INCLUDE_PATH=$(ANDROID_BUILD_TOP)/external/elfutils/src/libelf/
 endif
 
 ifeq ($(TARGET_KERNEL_MODULES),)

project bionic/
diff --git a/linker/linker.cpp b/linker/linker.cpp
index 7909241..19f461c 100644
--- a/linker/linker.cpp
+++ b/linker/linker.cpp
@@ -3260,7 +3260,6 @@ static ElfW(Addr) __linker_init_post_relocation(KernelArgumentBlock& args, ElfW(
   ElfW(Ehdr)* elf_hdr = reinterpret_cast<ElfW(Ehdr)*>(si->base);
   if (elf_hdr->e_type != ET_DYN) {
     __libc_format_fd(2, "error: only position independent executables (PIE) are supported.\n");
-    exit(EXIT_FAILURE);
   }
 #endif

project device/huawei/g750t01/
diff --git a/wpa_supplicant/Android.mk b/wpa_supplicant/Android.mk
index d312412..0eed00c 100644
--- a/wpa_supplicant/Android.mk
+++ b/wpa_supplicant/Android.mk
@@ -1,3 +1,4 @@
+ifeq ($(TARGET_BOOTLOADER_BOARD_NAME),mt6592)
 LOCAL_PATH := $(call my-dir)
 
 ##### For Google SUPPLICANT
@@ -53,3 +54,4 @@ include $(BUILD_STATIC_LIBRARY)
 ########################
 
 endif
+endif
\ No newline at end of file

project external/sepolicy/
diff --git a/isolated_app.te b/isolated_app.te
index ef68986..5c63919 100644
--- a/isolated_app.te
+++ b/isolated_app.te
@@ -35,4 +35,4 @@ neverallow isolated_app {
 }:service_manager find;
 
 # Isolated apps shouldn't be able to access the driver directly.
-neverallow isolated_app gpu_device:chr_file { rw_file_perms execute };
+#neverallow isolated_app gpu_device:chr_file { rw_file_perms execute };

project frameworks/base/
diff --git a/core/res/res/values/custom_config.xml b/core/res/res/values/custom_config.xml
index 02c5bf5..ac11784 100644
--- a/core/res/res/values/custom_config.xml
+++ b/core/res/res/values/custom_config.xml
@@ -83,7 +83,4 @@
     -->
     <integer name="config_longPressOnMenuBehavior">0</integer>
 
-    <!-- Older rotation sensors are not setting event.timestamp correctly. Setting to
-         true will use SystemClock.elapsedRealtimeNanos() to set timestamp. -->
-    <bool name="config_useSystemClockforRotationSensor">false</bool>
 </resources>
diff --git a/packages/SystemUI/src/com/android/systemui/doze/ProximitySensorManager.java b/packages/SystemUI/src/com/android/systemui/doze/ProximitySensorManager.java
index 4cdc999..1fc87ba 100644
--- a/packages/SystemUI/src/com/android/systemui/doze/ProximitySensorManager.java
+++ b/packages/SystemUI/src/com/android/systemui/doze/ProximitySensorManager.java
@@ -22,8 +22,6 @@ import android.hardware.SensorEvent;
 import android.hardware.SensorEventListener;
 import android.hardware.SensorManager;
 
-import javax.annotation.concurrent.GuardedBy;
-
 /**
  * Manages the proximity sensor and notifies a listener when enabled.
  */
@@ -79,12 +77,12 @@ public class ProximitySensorManager {
          * <p>
          * Before registering and after unregistering we are always in the {@link State#FAR} state.
          */
-        @GuardedBy("this") private State mLastState;
+        private State mLastState;  
         /**
          * If this flag is set to true, we are waiting to reach the {@link State#FAR} state and
          * should notify the listener and unregister when that happens.
          */
-        @GuardedBy("this") private boolean mWaitingForFarState;
+        private boolean mWaitingForFarState;
 
         public ProximitySensorEventListener(SensorManager sensorManager, Sensor proximitySensor,
                 ProximityListener listener) {
@@ -175,7 +173,6 @@ public class ProximitySensorManager {
             }
         }
 
-        @GuardedBy("this")
         private void unregisterWithoutNotification() {
             mSensorManager.unregisterListener(this);
             mWaitingForFarState = false;

project system/core/
diff --git a/init/Android.mk b/init/Android.mk
index a4c9819..0722c2c 100755
--- a/init/Android.mk
+++ b/init/Android.mk
@@ -58,6 +58,14 @@ ifeq ($(TARGET_BOARD_PLATFORM),mt6592)
 LOCAL_CFLAGS += -DMTK_MT6592
 endif
 
+ifeq ($(TARGET_BOARD_PLATFORM),mt6572)
+LOCAL_CFLAGS += -DMTK_MT6572
+endif
+
+ifeq ($(TARGET_BOARD_PLATFORM),mt6753)
+LOCAL_CFLAGS += -DMTK_MT6753
+endif
+
 SYSTEM_CORE_INIT_DEFINES := BOARD_CHARGING_MODE_BOOTING_LPM
 
 $(foreach system_core_init_define,$(SYSTEM_CORE_INIT_DEFINES), \
diff --git a/init/init.cpp b/init/init.cpp
index 569e2ec..4198274 100644
--- a/init/init.cpp
+++ b/init/init.cpp
@@ -845,6 +845,12 @@ static void export_kernel_boot_props() {
         { "ro.boot.mode",       "ro.bootmode",   "unknown", },
         { "ro.boot.baseband",   "ro.baseband",   "unknown", },
         { "ro.boot.bootloader", "ro.bootloader", "unknown", },
+#ifdef MTK_MT6572     
+        { "ro.boot.hardware",   "ro.hardware",   "mt6572", },
+#endif
+#ifdef MTK_MT6753     
+        { "ro.boot.hardware",   "ro.hardware",   "mt6753", },
+#endif
 #ifdef MTK_MT6582     
         { "ro.boot.hardware",   "ro.hardware",   "mt6582", },
 #endif
diff --git a/mkbootimg/Android.mk b/mkbootimg/Android.mk
index dd42459..3cde4a6 100644
--- a/mkbootimg/Android.mk
+++ b/mkbootimg/Android.mk
@@ -25,6 +25,7 @@ LOCAL_MODULE_CLASS := UTILITY_EXECUTABLES
 LOCAL_UNSTRIPPED_PATH := $(PRODUCT_OUT)/symbols/utilities
 LOCAL_MODULE_PATH := $(PRODUCT_OUT)/utilities
 LOCAL_FORCE_STATIC_EXECUTABLE := true
+LOCAL_PACK_MODULE_RELOCATIONS := false
 include $(BUILD_EXECUTABLE)
 
 include $(CLEAR_VARS)
@@ -37,6 +38,7 @@ LOCAL_MODULE_CLASS := UTILITY_EXECUTABLES
 LOCAL_UNSTRIPPED_PATH := $(PRODUCT_OUT)/symbols/utilities
 LOCAL_MODULE_PATH := $(PRODUCT_OUT)/utilities
 LOCAL_FORCE_STATIC_EXECUTABLE := true
+LOCAL_PACK_MODULE_RELOCATIONS := false
 include $(BUILD_EXECUTABLE)
 
 $(call dist-for-goals,dist_files,$(LOCAL_BUILT_MODULE))
diff --git a/rootdir/init.rc b/rootdir/init.rc
index 320f015..9eb5c43 100644
--- a/rootdir/init.rc
+++ b/rootdir/init.rc
@@ -595,7 +595,6 @@ on property:ro.debuggable=1
 service adbd /sbin/adbd --root_seclabel=u:r:su:s0
     class core
     socket adbd stream 660 system system
-    enabled
     seclabel u:r:adbd:s0
 
 # adbd on at boot in emulator
@@ -664,7 +663,7 @@ service drm /system/bin/drmserver
 service media /system/bin/mediaserver
     class main
     user root
-    group audio camera inet net_bt net_bt_admin net_bw_acct drmrpc mediadrm qcom_diag media sdcard_r system net_bt_stack nvram ccci
+    group audio inet net_bt net_bt_admin net_bw_acct drmrpc mediadrm media sdcard_r system net_bt_stack nvram ccci
     ioprio rt 4
 
 # One shot invocation to deal with encrypted volume.
